<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:fluent="clr-namespace:MauiIcons.Fluent;assembly=MauiIcons.Fluent"             
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             xmlns:android="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.AndroidSpecific;assembly=Microsoft.Maui.Controls"
             x:Class="Todo.Views.TodoItemPage"
             Title="{Binding ListTitle}">
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Add Todo Item" x:Name="AddButton" Clicked="AddButton_Clicked"  IconImageSource="{fluent:Icon Icon=Add28}" />
    </ContentPage.ToolbarItems>

    <CollectionView x:Name="TodoLists" x:FieldModifier="public" SelectionMode="None" ItemsSource="{Binding TodoItems}">
        <CollectionView.EmptyView>
            <ContentView>
                <Label Text="You have no Todo items for this list at the moment. Use the Add icon in the top right to create a Todo list."
                       Padding="10" VerticalTextAlignment="Center" HorizontalTextAlignment="Center" />
            </ContentView>
        </CollectionView.EmptyView>
        <CollectionView.ItemTemplate>
            <DataTemplate>
                <SwipeView ios:SwipeView.SwipeTransitionMode="Drag" android:SwipeView.SwipeTransitionMode="Drag">
                    <SwipeView.RightItems>
                        <SwipeItems>
                            <SwipeItem Text="Delete"                                           
                                   IconImageSource="{fluent:Icon Icon=Delete24, IconColor=White}"
                                   BackgroundColor="{StaticResource DeleteBackgroundColor}"
                                   Invoked="DeleteItem_Invoked"
                                   CommandParameter="{Binding Id}"/>
                            <SwipeItem Text="Edit"                                           
                                   IconImageSource="{fluent:Icon Icon=Edit32, IconColor=White}"
                                   BackgroundColor="{StaticResource Yellow100Accent}"
                                   Invoked="EditItem_Invoked"
                                   CommandParameter="{Binding Id}"/>
                        </SwipeItems>
                    </SwipeView.RightItems>
                    <VerticalStackLayout HorizontalOptions="Fill">
                        <Grid>
                            <Label Grid.Column="0" Text="{Binding Title}" VerticalTextAlignment="Center" FontSize="18" Margin="10" HorizontalOptions="Start" />
                            <RadioButton Grid.Column="1" CheckedChanged="RadioButton_CheckedChanged" Value="{Binding IsComplete}" HorizontalOptions="End" />
                        </Grid>
                        <BoxView Style="{StaticResource BoxSeperator}"/>
                    </VerticalStackLayout>
                </SwipeView>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>